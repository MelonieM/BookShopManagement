<Page x:Class="BookShopManagement.Pages.ReportsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Reports">

    <Page.Resources>
        <Style x:Key="ActionButton" TargetType="Button">
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="5" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            <TextBlock Text="📈 Reports &amp; Analytics" 
                     FontSize="28" 
                     FontWeight="Bold" 
                     Foreground="#333"
                     Margin="0,0,0,20"/>

            <!-- Report Buttons -->
            <Border Style="{StaticResource Card}">
                <StackPanel>
                    <TextBlock Text="📋 Available Reports" 
                             FontSize="20" 
                             FontWeight="Bold" 
                             Margin="0,0,0,15"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                            <Button Content="📅 Today's Sales" 
                                  Style="{StaticResource ActionButton}"
                                  Background="#4CAF50"
                                  Click="BtnTodaySales_Click"
                                  HorizontalAlignment="Stretch"/>

                            <Button Content="📊 Sales by Date Range" 
                                  Style="{StaticResource ActionButton}"
                                  Background="#2196F3"
                                  Click="BtnDateRangeSales_Click"
                                  HorizontalAlignment="Stretch"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                            <Button Content="⚠️ Low Stock Alert" 
                                  Style="{StaticResource ActionButton}"
                                  Background="#F44336"
                                  Click="BtnLowStock_Click"
                                  HorizontalAlignment="Stretch"/>

                            <Button Content="🏆 Top Selling Books" 
                                  Style="{StaticResource ActionButton}"
                                  Background="#FF9800"
                                  Click="BtnTopSelling_Click"
                                  HorizontalAlignment="Stretch"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Report Results -->
            <Border Style="{StaticResource Card}">
                <StackPanel>
                    <TextBlock x:Name="ReportTitle" 
                             Text="Select a report above to view results" 
                             FontSize="18" 
                             FontWeight="Bold" 
                             Foreground="#666"
                             Margin="0,0,0,15"/>

                    <ScrollViewer MaxHeight="500" VerticalScrollBarVisibility="Auto">
                        <TextBlock x:Name="ReportContent" 
                                 Text="" 
                                 FontSize="13" 
                                 TextWrapping="Wrap"
                                 FontFamily="Consolas"/>
                    </ScrollViewer>

                    <!-- Data Grid for detailed results -->
                    <DataGrid x:Name="ReportDataGrid" 
                            AutoGenerateColumns="True"
                            IsReadOnly="True"
                            Visibility="Collapsed"
                            AlternatingRowBackground="#F5F5F5"
                            GridLinesVisibility="None"
                            HeadersVisibility="Column"
                            BorderBrush="#DDD"
                            BorderThickness="1"
                            MaxHeight="400"
                            Margin="0,10,0,0"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
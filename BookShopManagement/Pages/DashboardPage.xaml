<Page x:Class="BookShopManagement.Pages.DashboardPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Dashboard">

    <Page.Resources>
        <Style x:Key="StatCard" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="MinHeight" Value="120"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            <TextBlock Text="Dashboard Overview" 
                     FontSize="28" 
                     FontWeight="Bold" 
                     Foreground="#333"
                     Margin="0,0,0,20"/>

            <!-- Statistics Cards -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Total Books Card -->
                <Border Grid.Column="0" Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="📚" FontSize="32" Margin="0,0,0,10"/>
                        <TextBlock Text="Total Books" 
                                 FontSize="14" 
                                 Foreground="#666"/>
                        <TextBlock x:Name="TotalBooksText" 
                                 Text="0" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 Foreground="#2196F3"/>
                    </StackPanel>
                </Border>

                <!-- Total Customers Card -->
                <Border Grid.Column="1" Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="👥" FontSize="32" Margin="0,0,0,10"/>
                        <TextBlock Text="Total Customers" 
                                 FontSize="14" 
                                 Foreground="#666"/>
                        <TextBlock x:Name="TotalCustomersText" 
                                 Text="0" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 Foreground="#4CAF50"/>
                    </StackPanel>
                </Border>

                <!-- Today's Sales Card -->
                <Border Grid.Column="2" Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="💰" FontSize="32" Margin="0,0,0,10"/>
                        <TextBlock Text="Today's Revenue" 
                                 FontSize="14" 
                                 Foreground="#666"/>
                        <TextBlock x:Name="TodayRevenueText" 
                                 Text="$0.00" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 Foreground="#FF9800"/>
                    </StackPanel>
                </Border>

                <!-- Low Stock Alert Card -->
                <Border Grid.Column="3" Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="⚠️" FontSize="32" Margin="0,0,0,10"/>
                        <TextBlock Text="Low Stock Items" 
                                 FontSize="14" 
                                 Foreground="#666"/>
                        <TextBlock x:Name="LowStockText" 
                                 Text="0" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 Foreground="#F44336"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Recent Activity Section -->
            <Grid Margin="0,30,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Recent Sales -->
                <Border Grid.Column="0" Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="Recent Sales (Today)" 
                                 FontSize="18" 
                                 FontWeight="Bold" 
                                 Foreground="#333"
                                 Margin="0,0,0,15"/>
                        <DataGrid x:Name="RecentSalesGrid" 
                                AutoGenerateColumns="False"
                                IsReadOnly="True"
                                HeadersVisibility="Column"
                                GridLinesVisibility="None"
                                Background="Transparent"
                                BorderThickness="0"
                                RowBackground="White"
                                AlternatingRowBackground="#F5F5F5"
                                MaxHeight="250">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Time" Binding="{Binding SaleDate, StringFormat='HH:mm'}" Width="80"/>
                                <DataGridTextColumn Header="Amount" Binding="{Binding FinalAmount, StringFormat='${0:F2}'}" Width="*"/>
                                <DataGridTextColumn Header="Payment" Binding="{Binding PaymentMethod}" Width="*"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>

                <!-- Low Stock Books -->
                <Border Grid.Column="1" Style="{StaticResource StatCard}">
                    <StackPanel>
                        <TextBlock Text="Low Stock Alert" 
                                 FontSize="18" 
                                 FontWeight="Bold" 
                                 Foreground="#333"
                                 Margin="0,0,0,15"/>
                        <DataGrid x:Name="LowStockGrid" 
                                AutoGenerateColumns="False"
                                IsReadOnly="True"
                                HeadersVisibility="Column"
                                GridLinesVisibility="None"
                                Background="Transparent"
                                BorderThickness="0"
                                RowBackground="White"
                                AlternatingRowBackground="#F5F5F5"
                                MaxHeight="250">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*"/>
                                <DataGridTextColumn Header="Stock" Binding="{Binding StockQuantity}" Width="60"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Quick Actions -->
            <Border Style="{StaticResource StatCard}" Margin="10,30,10,10">
                <StackPanel>
                    <TextBlock Text="Quick Actions" 
                             FontSize="18" 
                             FontWeight="Bold" 
                             Foreground="#333"
                             Margin="0,0,0,15"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button x:Name="BtnRefresh" 
                              Content="🔄 Refresh Dashboard" 
                              Width="200" Height="50"
                              Background="#9C27B0" 
                              Foreground="White"
                              FontSize="14" 
                              FontWeight="SemiBold"
                              Margin="10"
                              Click="BtnRefresh_Click"
                              Cursor="Hand"
                              BorderThickness="0">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}" 
                                          CornerRadius="8">
                                        <ContentPresenter HorizontalAlignment="Center" 
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>